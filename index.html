<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSS-10 스트레스 진단 | healercoach</title>
    <!-- 브라우저가 React를 이해할 수 있게 해주는 도구들입니다 -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; -webkit-tap-highlight-color: transparent; }
        .animate-fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        button:active { transform: scale(0.98); }
    </style>
</head>
<body class="bg-slate-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;
        
        // 아이콘 (SVG 직접 삽입)
        const Heart = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-rose-400 fill-rose-400"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.505 4.046 3 5.5L12 21l7-7z"/></svg>;
        const ClipboardCheck = () => <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-indigo-500"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="m9 14 2 2 4-4"/></svg>;
        const ChevronRight = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>;
        const Info = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className="text-indigo-400"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>;
        const Award = ({className}) => <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526"/><circle cx="12" cy="8" r="6"/></svg>;
        const RefreshCw = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>;
        const CheckCircle2 = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"/><path d="m9 12 2 2 4-4"/></svg>;

        const App = () => {
            const [step, setStep] = useState('intro');
            const [currentIndex, setCurrentIndex] = useState(0);
            const [answers, setAnswers] = useState(Array(10).fill(null));

            const questions = [
                "1. 지난 한 달 동안, 예상치 못한 일 때문에 당황한 적이 얼마나 있었습니까?",
                "2. 지난 한 달 동안, 인생에서 중요한 일들을 조절할 수 없다고 느낀 적이 얼마나 있었습니까?",
                "3. 지난 한 달 동안, 신경이 예민해지고 스트레스를 받는다고 느낀 적이 얼마나 있었습니까?",
                "4. 지난 한 달 동안, 생활상의 짜증 나는 일들을 잘 처리했다는 자신감이 얼마나 있었습니까?",
                "5. 지난 한 달 동안, 인생에서 일어나는 중요한 변화들을 잘 대처하고 있다고 느낀 적이 얼마나 있었습니까?",
                "6. 지난 한 달 동안, 자신에게 닥친 어려움을 해결할 능력이 없다고 느낀 적이 얼마나 있었습니까?",
                "7. 지난 한 달 동안, 모든 일이 뜻대로 진행되고 있다고 느낀 적이 얼마나 있었습니까?",
                "8. 지난 한 달 동안, 당신이 감당하지 못할 정도로 일들이 쌓여있다고 느낀 적이 얼마나 있었습니까?",
                "9. 지난 한 달 동안, 당신의 통제 범위를 벗어난 일 때문에 화가 난 적이 얼마나 있었습니까?",
                "10. 지난 한 달 동안, 어려운 일들이 너무 많이 쌓여서 극복할 수 없다고 느낀 적이 얼마나 있었습니까?"
            ];

            const reverseIndices = [3, 4, 6, 7];

            const handleAnswer = (value) => {
                const newAnswers = [...answers];
                newAnswers[currentIndex] = value;
                setAnswers(newAnswers);
                if (currentIndex < questions.length - 1) {
                    setCurrentIndex(currentIndex + 1);
                } else {
                    setStep('result');
                }
            };

            const calculateScore = () => {
                return answers.reduce((acc, curr, idx) => {
                    if (reverseIndices.includes(idx)) return acc + (4 - curr);
                    return acc + curr;
                }, 0);
            };

            const getResult = (score) => {
                if (score <= 13) return { title: "낮은 스트레스 상태", color: "text-emerald-600", bg: "bg-emerald-50", desc: "현재 심리적 자산이 풍부한 상태입니다. 외부 자극을 이겨낼 힘이 충분하시네요! 주변 동료들에게 긍정적인 에너지를 나눠주세요." };
                if (score <= 26) return { title: "중간 정도의 스트레스", color: "text-amber-600", bg: "bg-amber-50", desc: "대부분의 직장인이 속하는 구간입니다. 스트레스가 '성장의 동력'이 되기도 하지만, 가끔은 환기가 필요한 시점입니다." };
                return { title: "높은 스트레스 상태", color: "text-rose-600", bg: "bg-rose-50", desc: "지금은 에너지 소진 신호가 켜진 상태입니다. 효율보다 나 자신을 돌보는 시간을 우선적으로 가져보세요." };
            };

            const resetTest = () => {
                setAnswers(Array(10).fill(null));
                setCurrentIndex(0);
                setStep('intro');
            };

            return (
                <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4">
                    <div className="max-w-md w-full bg-white rounded-3xl shadow-xl overflow-hidden animate-fade-in">
                        <div className="p-6 border-b border-slate-100 flex items-center justify-between bg-white sticky top-0 z-10">
                            <div className="flex items-center gap-2">
                                <Heart />
                                <h1 className="font-bold text-lg tracking-tight">PSS-10 스트레스 진단</h1>
                            </div>
                            {step === 'test' && <span className="text-sm font-medium text-slate-400">{currentIndex + 1} / 10</span>}
                        </div>

                        <div className="p-6 md:p-8 min-h-[500px] flex flex-col">
                            {step === 'intro' && (
                                <div className="flex-1 flex flex-col items-center text-center animate-fade-in">
                                    <div className="w-20 h-20 bg-indigo-50 rounded-full flex items-center justify-center mb-6"><ClipboardCheck /></div>
                                    <h2 className="text-2xl font-bold mb-4">내 마음의 무게 확인하기</h2>
                                    <div className="space-y-4 text-slate-600 text-sm mb-8">
                                        <p>Sheldon Cohen 교수의 <span className="font-semibold text-indigo-600">'지각된 스트레스 척도'</span>입니다.</p>
                                        <div className="bg-slate-50 p-4 rounded-2xl text-left border border-slate-100">
                                            <div className="flex gap-2 mb-2"><Info /><span className="font-semibold text-xs text-slate-700 uppercase tracking-wider">검사 안내</span></div>
                                            <ul className="list-disc list-inside space-y-1 text-xs text-slate-500">
                                                <li>지난 한 달 동안의 느낌을 측정합니다.</li>
                                                <li>직관적인 답변이 가장 정확합니다.</li>
                                                <li>소요 시간: 약 2~3분</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <button onClick={() => setStep('test')} className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-2xl font-bold shadow-lg flex items-center justify-center gap-2 transition-all">검사 시작하기 <ChevronRight /></button>
                                </div>
                            )}

                            {step === 'test' && (
                                <div className="flex-1 flex flex-col animate-fade-in">
                                    <div className="mb-8">
                                        <div className="w-full bg-slate-100 h-2 rounded-full mb-6 text-left">
                                            <div className="bg-indigo-500 h-2 rounded-full transition-all duration-300" style={{ width: `${((currentIndex + 1) / 10) * 100}%` }} />
                                        </div>
                                        <h3 className="text-xl font-bold leading-snug break-keep">{questions[currentIndex]}</h3>
                                    </div>
                                    <div className="grid gap-3 mb-8">
                                        {["전혀 없었다", "거의 없었다", "가끔 있었다", "자주 있었다", "매우 자주 있었다"].map((label, val) => (
                                            <button key={val} onClick={() => handleAnswer(val)} className="w-full p-4 text-left border-2 border-slate-100 hover:border-indigo-400 hover:bg-indigo-50 rounded-2xl transition-all font-medium text-slate-700 flex justify-between items-center group">
                                                <span className="group-hover:text-indigo-600 transition-colors">{label}</span>
                                                <div className="w-6 h-6 rounded-full border-2 border-slate-200 group-hover:border-indigo-400 transition-all" />
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {step === 'result' && (
                                <div className="flex-1 flex flex-col items-center animate-fade-in">
                                    {(() => {
                                        const score = calculateScore();
                                        const result = getResult(score);
                                        return (
                                            <>
                                                <div className={`w-24 h-24 rounded-full ${result.bg} flex items-center justify-center mb-6`}><Award className={`${result.color}`} /></div>
                                                <div className="text-center mb-8">
                                                    <p className="text-slate-400 text-sm font-medium mb-1">나의 스트레스 점수</p>
                                                    <h2 className="text-5xl font-black mb-4 text-slate-800">{score}점</h2>
                                                    <div className={`inline-block px-4 py-1 rounded-full ${result.bg} ${result.color} font-bold text-sm mb-6`}>{result.title}</div>
                                                    <p className="text-slate-600 leading-relaxed break-keep px-2 text-sm">{result.desc}</p>
                                                </div>
                                                <div className="w-full space-y-3 mt-auto">
                                                    <button onClick={resetTest} className="w-full py-4 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-2xl font-bold transition-all flex items-center justify-center gap-2"><RefreshCw /> 다시 검사하기</button>
                                                    <div className="flex items-center justify-center gap-2 text-indigo-600 bg-indigo-50 py-3 rounded-2xl text-xs font-semibold"><CheckCircle2 /> healercoach의 특강과 함께하세요!</div>
                                                </div>
                                            </>
                                        );
                                    })()}
                                </div>
                            )}
                        </div>

                        <div className="p-6 bg-slate-50 text-center border-t border-slate-100 text-[10px] text-slate-400 uppercase tracking-widest leading-relaxed">
                            Based on PSS-10 (Cohen, 1983) | Designed by <span className="text-slate-500 font-bold">healercoach</span>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>